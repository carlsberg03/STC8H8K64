C51 COMPILER V9.00   SEEKFREE_WIRELESS                                                     05/12/2022 17:30:47 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE SEEKFREE_WIRELESS
OBJECT MODULE PLACED IN .\Out_File\SEEKFREE_WIRELESS.obj
COMPILER INVOKED BY: D:\Keil\Keil_4\C51\BIN\C51.EXE ..\..\Libraries\seekfree_peripheral\SEEKFREE_WIRELESS.c LARGE OMF2 B
                    -ROWSE INCDIR(..\..\Libraries\libraries;..\..\Libraries\seekfree_libraries;..\..\Libraries\seekfree_peripheral;..\USER\in
                    -c;..\USER\src;..\CODE) DEBUG PRINT(.\Out_File\SEEKFREE_WIRELESS.lst) OBJECT(.\Out_File\SEEKFREE_WIRELESS.obj)

line level    source

   1          /*********************************************************************************************************
             -************
   2           * COPYRIGHT NOTICE
   3           * Copyright (c) 2018,Öð·É¿Æ¼¼
   4           * All rights reserved.
   5           * ¼¼ÊõÌÖÂÛQQÈº£ºÒ»Èº£º179029047(ÒÑÂú)  ¶þÈº£º244861897
   6           *
   7           * ÒÔÏÂËùÓÐÄÚÈÝ°æÈ¨¾ùÊôÖð·É¿Æ¼¼ËùÓÐ£¬Î´¾­ÔÊÐí²»µÃÓÃÓÚÉÌÒµÓÃÍ¾£¬
   8           * »¶Ó­¸÷Î»Ê¹ÓÃ²¢´«²¥±¾³ÌÐò£¬ÐÞ¸ÄÄÚÈÝÊ±±ØÐë±£ÁôÖð·É¿Æ¼¼µÄ°æÈ¨ÉùÃ÷¡£
   9           *
  10           * @file                Öð·É¿Æ¼¼ÎÞÏß×ª´®¿ÚÄ£¿é
  11           * @company                     ³É¶¼Öð·É¿Æ¼¼ÓÐÏÞ¹«Ë¾
  12           * @author              Öð·É¿Æ¼¼(QQ3184284598)
  13           * @version             ²é¿´docÄÚversionÎÄ¼þ °æ±¾ËµÃ÷
  14           * @Software            MDK FOR C51 V9.60
  15           * @Taobao              https://seekfree.taobao.com/
  16           * @date                2019-03-27
  17           * @note                
  18                                                  ½ÓÏß¶¨Òå£º
  19                                                  ------------------------------------ 
  20                                                      ÎÞÏß×ª´®¿Ú       µ¥Æ¬»ú                        
  21                                                  RX              ²é¿´SEEKFREE_WIRELESS.hÎÄ¼þÖÐµÄWIRELESS_UART_TXºê¶¨Òå
  22                                                  TX              ²é¿´SEEKFREE_WIRELESS.hÎÄ¼þÖÐµÄWIRELESS_UART_RXºê¶¨Òå
  23                                                  RTS             ²é¿´SEEKFREE_WIRELESS.hÎÄ¼þÖÐµÄRTS_PINºê¶¨Òå
  24                                                  CMD             ²é¿´SEEKFREE_WIRELESS.hÎÄ¼þÖÐµÄCMD_PINºê¶¨Òå
  25                                                  ------------------------------------ 
  26           *********************************************************************************************************
             -***********/
  27          
  28          
  29          #include "SEEKFREE_WIRELESS.h"
  30          #include "zf_uart.h"
  31          
  32          
  33          
  34          //--------------------------------------------------------------------------------------------------------
             ------------
  35          //  @brief      ÎÞÏß×ª´®¿ÚÄ£¿é»Øµ÷º¯Êý
  36          //  @param      NULL
  37          //  @return     void                                    
  38          //  @since      v1.0
  39          //  Sample usage:       
  40          //  @note       
  41          //--------------------------------------------------------------------------------------------------------
             ------------
  42          void wireless_uart_callback(void)
  43          {
  44   1              uint8 wireless_rx_buffer = S4BUF;
  45   1              //½Óµ½Ò»¸ö×Ö½Úºóµ¥Æ¬»ú½«»á½øÈë´®¿ÚÖÐ¶Ï£¬Í¨¹ýÔÚ´Ë´¦¶ÁÈ¡wireless_rx_buffer¿ÉÒÔÈ¡×ßÊý¾Ý
  46   1      }
  47          
  48          
  49          
C51 COMPILER V9.00   SEEKFREE_WIRELESS                                                     05/12/2022 17:30:47 PAGE 2   

  50          
  51          //--------------------------------------------------------------------------------------------------------
             ------------
  52          //  @brief      ÎÞÏß×ª´®¿ÚÄ£¿é³õÊ¼»¯
  53          //  @param      NULL
  54          //  @return     void                                    
  55          //  @since      v1.0
  56          //  Sample usage:       
  57          //  @note       
  58          //--------------------------------------------------------------------------------------------------------
             ------------
  59          void seekfree_wireless_init(void)
  60          {
  61   1          wireless_type = WIRELESS_SI24R1;
  62   1          
  63   1          //±¾º¯ÊýÊ¹ÓÃµÄ²¨ÌØÂÊÎª115200£¬ÎªÎÞÏß×ª´®¿ÚÄ£¿éµÄÄ¬ÈÏ²¨ÌØÂÊ£¬ÈçÐèÆäËû²¨ÌØÂÊÇë×ÔÐÐÅäÖÃÄ£¿é²¢ÐÞ¸Ä´®¿ÚµÄ²¨
             -ÌØÂÊ
  64   1      
  65   1              uart_init(WIRELESS_UART, WIRELESS_UART_RX_PIN, WIRELESS_UART_TX_PIN, WIRELESS_UART_BAUD, WIRELESS_TIMER_N
             -);        //³õÊ¼»¯´®¿Ú    
  66   1          
  67   1      }
  68          
  69          //--------------------------------------------------------------------------------------------------------
             ------------
  70          //  @brief      ÎÞÏß×ª´®¿ÚÄ£¿é ·¢ËÍº¯Êý
  71          //  @param      buff        ÐèÒª·¢ËÍµÄÊý¾ÝµØÖ·
  72          //  @param      len         ·¢ËÍ³¤¶È
  73          //  @return     uint32      Ê£ÓàÎ´·¢ËÍµÄ×Ö½ÚÊý   
  74          //  @since      v1.0
  75          //  Sample usage:       
  76          //  @note       
  77          //--------------------------------------------------------------------------------------------------------
             ------------
  78          uint32 seekfree_wireless_send_buff(uint8 *buff, uint32 len)
  79          {
  80   1          while(len>30)
  81   1          {
  82   2              if(RTS_PIN == 1)  
  83   2              {
  84   3                  return len;//Ä£¿éÃ¦,Èç¹ûÔÊÐíµ±Ç°³ÌÐòÊ¹ÓÃwhileµÈ´ý Ôò¿ÉÒÔÊ¹ÓÃºóÃæ×¢ÊÍµÄwhileµÈ´ýÓï¾äÌæ»»±¾ifÓï¾
             -ä
  85   3              }
  86   2              //while(RTS_PIN);  //Èç¹ûRTSÎªµÍµçÆ½£¬Ôò¼ÌÐø·¢ËÍÊý¾Ý
  87   2              uart_putbuff(WIRELESS_UART,buff,30);
  88   2      
  89   2              buff += 30; //µØÖ·Æ«ÒÆ
  90   2              len -= 30;//ÊýÁ¿
  91   2          }
  92   1          
  93   1          if(RTS_PIN == 1)  
  94   1          {
  95   2              return len;//Ä£¿éÃ¦,Èç¹ûÔÊÐíµ±Ç°³ÌÐòÊ¹ÓÃwhileµÈ´ý Ôò¿ÉÒÔÊ¹ÓÃºóÃæ×¢ÊÍµÄwhileµÈ´ýÓï¾äÌæ»»±¾ifÓï¾ä
  96   2          }
  97   1          //while(RTS_PIN);  //Èç¹ûRTSÎªµÍµçÆ½£¬Ôò¼ÌÐø·¢ËÍÊý¾Ý
  98   1          uart_putbuff(WIRELESS_UART,buff,len);//·¢ËÍ×îºóµÄÊý¾Ý
  99   1          
 100   1          return 0;
 101   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
C51 COMPILER V9.00   SEEKFREE_WIRELESS                                                     05/12/2022 17:30:47 PAGE 3   

   CODE SIZE        =    210    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----       8
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
